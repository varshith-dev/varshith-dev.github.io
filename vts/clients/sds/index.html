<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Health Service Bot</title>
  <style>
    :root {
      --desktop-bg: #f3f8fd;
      --desktop-header-bg: #0866d6;
      --desktop-msg-bot-bg: #e1f4e9;
      --desktop-msg-user-bg: #507dba;
      --desktop-msg-user-color: #fff;
      --tablet-bg: #fff7ee;
      --tablet-header-bg: #32ad72;
      --tablet-msg-bot-bg: #ebfaf5;
      --tablet-msg-user-bg: #32ad72;
      --tablet-msg-user-color: #fff;
      --mobile-bg: #f9efe7;
      --mobile-header-bg: #ea4646;
      --mobile-msg-bot-bg: #f7ebea;
      --mobile-msg-user-bg: #ea4646;
      --mobile-msg-user-color: #fff;
      --radius: 18px;
      --font-main: 'Segoe UI', Arial, sans-serif;
    }
    html, body {
      padding: 0;
      margin: 0;
      width: 100%;
      min-height: 100vh;
    }
    body {
      background: var(--desktop-bg);
      font-family: var(--font-main);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      transition: background 0.2s;
    }
    .container {
      background: #fff;
      border-radius: var(--radius);
      box-shadow: 0 8px 32px #0d6ed615;
      max-width: 480px;
      width: 98vw;
      padding: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 670px;
    }
    .header {
      background: var(--desktop-header-bg);
      color: #fff;
      font-size: 1.6rem;
      padding: 1.6rem 1.8rem;
      font-weight: 600;
      position: relative;
      display: flex;
      align-items: center;
      gap: 0.8em;
      letter-spacing: 1.6px;
    }
    .header-icon {
      font-size: 2.1em;
      margin-right: 0.3em;
      vertical-align: middle;
    }
    .chat-area {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem 2rem;
      background: inherit;
      display: flex;
      flex-direction: column;
      gap: 1.16em;
    }
    .msg {
      max-width: 85%;
      padding: 0.75rem 1.35rem;
      border-radius: var(--radius) var(--radius) var(--radius) 0.5em;
      font-size: 1.07rem;
      line-height: 1.48;
      margin-bottom: 4px;
      word-break: break-word;
      border: 1.5px solid #c5e2f0;
      display: inline-block;
      box-sizing: border-box;
      position: relative;
    }
    .from-bot {
      align-self: flex-start;
      background: var(--desktop-msg-bot-bg);
      border-color: #8fd2cd;
      color: #155348;
    }
    .from-user {
      align-self: flex-end;
      background: var(--desktop-msg-user-bg);
      color: var(--desktop-msg-user-color);
      border-color: #39809a;
      border-radius: var(--radius) var(--radius) 0.5em var(--radius);
    }
    .inputs {
      display: flex;
      padding: 1.2rem 2rem;
      background: #f2f7fa;
      border-top: 2px solid #e0e9f9;
      gap: 0.8em;
      align-items: center;
    }
    .inputs input {
      flex: 1;
      font-size: 1.08rem;
      padding: 0.75em 1em;
      border-radius: var(--radius);
      border: 1.1px solid #c9d9e8;
      outline: none;
      background: #f6fbfd;
      transition: border 0.2s;
    }
    .inputs button {
      background: #0866d6;
      color: #fff;
      border: none;
      border-radius: var(--radius);
      padding: 0 1.4em;
      font-size: 1.18rem;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s;
    }
    .inputs button:hover, .inputs button:focus {
      background: #074c97;
    }
    /* Health tip and FAQs */
    .tip-box {
      background: #e1ebf7;
      border-radius: 8px;
      padding: 0.85em 1em;
      font-size: 1rem;
      color: #008c39;
      margin-bottom: 3px;
      border-left: 4px solid #0866d6;
    }

    /* Tablet (iPad/Android) - custom look */
    @media (max-width:1024px) and (min-width:612px) {
      body { background: var(--tablet-bg);}
      .container { height: 80vh; max-width: 700px;}
      .header {
        background: var(--tablet-header-bg);
        font-size: 1.35rem;
        padding: 1.1rem 1.2rem;
      }
      .header-icon { font-size: 2em;}
      .chat-area { padding: 1rem 1.1rem;}
      .msg {
        font-size: 1.01rem;
        border-radius: var(--radius);
        border-color: #32ad72;
        box-shadow: 0 2px 6px #c0ffe770;
      }
      .from-bot {
        background: var(--tablet-msg-bot-bg);
        border-color: #32ad72;
        color: #227761;
      }
      .from-user {
        background: var(--tablet-msg-user-bg);
        color: var(--tablet-msg-user-color);
        border-color: #32ad72;
      }
      .inputs { padding: 0.8rem 1.1rem;}
      .inputs button { background: #32ad72; }
      .inputs button:hover, .inputs button:focus { background: #277e59;}
      .tip-box { border-left-color: #32ad72; }
    }

    /* Mobile - keep prior style */
    @media (max-width:611px) {
      body { background: var(--mobile-bg);}
      .container { height: 99vh; max-width: 100vw; border-radius: 0;}
      .header {
        font-size: 1.05rem;
        background: var(--mobile-header-bg);
        padding: 1rem 0.5rem;
      }
      .header-icon { font-size: 1.7em;}
      .chat-area { padding: 0.6rem 0.5rem;}
      .msg {
        font-size: 0.97rem;
        border-radius: var(--radius);
        border-color: #ea4646;
      }
      .from-bot {
        background: var(--mobile-msg-bot-bg);
        border-color: #ea4646;
        color: #8c2626;
      }
      .from-user {
        background: var(--mobile-msg-user-bg);
        color: var(--mobile-msg-user-color);
        border-color: #ea4646;
      }
      .inputs { padding: 0.5rem 0.35rem;}
      .inputs button { background: #ea4646; }
      .inputs button:hover, .inputs button:focus { background: #a72828;}
      .tip-box { border-left-color: #ea4646; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header" id="header">
      <span class="header-icon">🩺</span>
      <span></span>
    </div>
    <div class="chat-area" id="chat"></div>
    <form class="inputs" id="inputForm" autocomplete="off">
      <input id="userInput" type="text" placeholder="Ask a health question or about medical services..." required />
      <button type="submit">Send</button>
    </form>
  </div>
  <script>
    // Fetch config JSON (title, greeting)
    let config = {
      botName: "Health Service Bot",
      greeting: "👋 Welcome! How may I help with your medical information today?"
    };

    fetch('config.json')
      .then(r => r.ok ? r.json() : config)
      .then(j => {
        config = j;
        document.querySelector('.header span:nth-child(2)').textContent = config.botName;
        addBotMsg(config.greeting);
        showHealthTip();
      })
      .catch(() => {
        document.querySelector('.header span:nth-child(2)').textContent = config.botName;
        addBotMsg(config.greeting);
        showHealthTip();
      });

    // UI elements
    const chat = document.getElementById('chat');
    const inputForm = document.getElementById('inputForm');
    const userInput = document.getElementById('userInput');

    // Messages
    function addMsg(text, cls) {
      const msg = document.createElement('div');
      msg.className = 'msg ' + cls;
      msg.textContent = text;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }
    function addBotMsg(text) { addMsg(text, 'from-bot'); }
    function addUserMsg(text) { addMsg(text, 'from-user'); }

    // Health quick tip, random on load
    function showHealthTip() {
      const tips = [
        "💧 Stay hydrated: Drink at least 8 cups of water daily.",
        "🧼 Wash your hands before and after meals.",
        "🍏 Eat a balanced diet for better immunity.",
        "🏃‍♂️ Regular exercise can help manage stress.",
        "🩺 Check blood pressure and sugar regularly if advised."
      ];
      const tip = tips[Math.floor(Math.random() * tips.length)];
      const tipBox = document.createElement('div');
      tipBox.className = 'tip-box';
      tipBox.textContent = tip;
      chat.appendChild(tipBox);
    }

    // Demo bot logic for health topics (can be replaced with AI/API)
    function getBotReply(userMsg) {
      userMsg = userMsg.toLowerCase();
      if (/covid|corona|virus/.test(userMsg)) return "To know more about COVID-19, check official guidelines or ask about symptoms, tests, or prevention.";
      if (/appointment|doctor|clinic/.test(userMsg)) return "You can schedule appointments by contacting your clinic through our online form or by phone.";
      if (/emergency/.test(userMsg)) return "If this is a medical emergency, please call your country's emergency number immediately.";
      if (/diet|food|nutrition/.test(userMsg)) return "A balanced diet helps maintain good health. Would you like diet tips for a specific condition or age group?";
      if (/medicine|drug|prescription/.test(userMsg)) return "Prescription medicines should be taken as advised by your healthcare provider. If you have doubts, please consult a doctor.";
      if (/health tip/.test(userMsg)) return "Here's a health tip: Regular sleep improves immunity and mental health.";
      if (/location|hospital|address/.test(userMsg)) return "You can find nearby hospitals by entering your area name or postcode.";
      if (/contact|phone|email/.test(userMsg)) return "For contact details, please visit our official website or ask for specific department numbers.";
      if (/help|information|service/.test(userMsg)) return "I'm here to help. Ask any health-related question or about our medical services!";
      if (/symptom|pain|fever|cough/.test(userMsg)) return "Describe your symptoms. I'll guide you to credible resources and when to seek medical help.";
      if (/thank|bye/.test(userMsg)) return "Take care! Reach out anytime for medical information.";
      return "For medical-specific details, please ask about appointments, symptoms, diet, or hospital locations.";
    }

    inputForm.onsubmit = e => {
      e.preventDefault();
      const text = userInput.value.trim();
      if (!text) return;
      addUserMsg(text);
      userInput.value = '';
      setTimeout(() => addBotMsg(getBotReply(text)), 500);
    };

    // Quick Enter key submit
    userInput.addEventListener("keydown", function(e) {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        inputForm.requestSubmit();
      }
    });
  </script>
</body>
</html>
